language: csharp
mono: latest
dotnet: 7.0.202
env: VER=$(if [[ "${TRAVIS_TAG:0:1}" == "v" ]]; then echo ${TRAVIS_TAG:1}.${TRAVIS_BUILD_NUMBER}; else echo 1.0.0.${TRAVIS_BUILD_NUMBER}; fi;)
script:
  - dotnet fsi build.fsx -- -- build test -ll Diag
deploy:
  - provider: script
    script: dotnet fsi build.fsx -- -- pack push -ll Diag
    skip_cleanup: true
    on:
      tags: true
      condition: "${TRAVIS_TAG:0:1} = v"